(function(e){function t(t){for(var i,r,o=t[0],c=t[1],u=t[2],d=0,p=[];d<o.length;d++)r=o[d],s[r]&&p.push(s[r][0]),s[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);l&&l(t);while(p.length)p.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(i=!1)}i&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var i={},s={index:0},a=[];function r(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("b635")},"01bd":function(e,t,n){},"0912":function(e,t,n){},"0e5b":function(e,t,n){},"147f":function(e,t,n){"use strict";var i=n("72eb"),s=n.n(i);s.a},"177a":function(e,t,n){},"1ccc":function(e,t,n){"use strict";var i=n("01bd"),s=n.n(i);s.a},"1d65":function(e,t,n){},"1e6d":function(e,t,n){},"274e":function(e,t,n){"use strict";var i=n("b284"),s=n.n(i);s.a},"2a66":function(e,t,n){"use strict";var i=n("8761"),s=n.n(i);s.a},"2fb4":function(e,t,n){},"462f":function(e,t,n){"use strict";var i=n("aff2"),s=n.n(i);s.a},"5c0b":function(e,t,n){"use strict";var i=n("5e27"),s=n.n(i);s.a},"5d10":function(e,t,n){"use strict";var i=n("1e6d"),s=n.n(i);s.a},"5e27":function(e,t,n){},"6af6":function(e,t,n){},"72eb":function(e,t,n){},"7b0e":function(e,t,n){"use strict";var i=n("177a"),s=n.n(i);s.a},"7d7f":function(e,t,n){"use strict";var i=n("0e5b"),s=n.n(i);s.a},8761:function(e,t,n){},"938f":function(e,t,n){"use strict";var i=n("f4d5"),s=n.n(i);s.a},"941d":function(e,t,n){},"96cfc":function(e,t,n){"use strict";var i=n("c25a"),s=n.n(i);s.a},a080:function(e,t,n){"use strict";var i=n("0912"),s=n.n(i);s.a},aff2:function(e,t,n){},b284:function(e,t,n){},b635:function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),s=n("2b27"),a=n.n(s),r=n("0874"),o=(n("3550"),n("7338"),n("aa2b"),n("c52b"),n("e99d"),n("6755"),n("c29b"),n("515e"),n("27d6"),n("5d6a"),n("2f62")),c=n("cebc"),u=(n("6762"),n("2fdb"),n("ac6a"),{defaultRiskCountries:["p_19","p_16","p_17","p_18","p_15","p_20","p_22","p_13","p_14","p_21"],defaultRiskFactors:["p_7","p_8","p_9","p_42","p_147","p_28"]});n("8615"),n("456d"),n("20d6");function l(e,t){return e.findIndex((function(e){return e.id===t}))}var d=function(e,t){return-1!==e.findIndex((function(e){return e[String(Object.keys(t))]===String(Object.values(t))}))},p=function(e,t){return e.map((function(e){var n=l(t,e);return n<0?null:{id:t[n].id,common_name:t[n].common_name,category:t[n].category}})).filter((function(e){return!!e}))},_=function(e,t){return t.filter((function(t){return e.some((function(e){return e.id===t.id&&"present"===t.choice_id}))})).map((function(e){return e.id}))},f={state:{isLoading:!1,isError:!1,errors:[],suggestions:[],riskFactors:[],shouldStop:!1,question:{},conditions:[],triage:{},questionCounter:0},getters:{evidenceIds:function(e,t,n){return n.patient.evidence.reduce((function(e,t){return"present"===t.choice_id&&e.push(t.id),e}),[])},riskFactors:function(e){return p(u.defaultRiskFactors,e.riskFactors)},riskCountries:function(e){return p(u.defaultRiskCountries,e.riskFactors)},diagnosisData:function(e,t,n){var i=n.patient.evidence.map((function(e){return{id:e.id,choice_id:e.choice_id,initial:e.initial,related:e.related}}));return{sex:n.patient.sex,age:n.patient.age,evidence:i}},selectedRiskFactorsCommon:function(e,t,n){return _(t.riskFactors,n.patient.evidence)},selectedRiskFactorsMap:function(e,t,n){return _(t.riskCountries,n.patient.evidence)},selectedSuggestions:function(e,t,n){return _(e.suggestions,n.patient.evidence)},parsedSymptoms:function(e,t,n){return n.patient.evidence.filter((function(e){return!0===e.initial}))}},actions:{removeParsedSymptom:function(e,t){var n=e.rootState,i=e.commit;i("REMOVE_EVIDENCE",l(n.patient.evidence,t))},addRiskFactors:function(e,t){var n=e.commit,i=t.riskFactors,s=t.data;s.forEach((function(e){i.includes(e.id)&&n("PUSH_RISK_FACTOR",e)}))},selectRiskFactors:function(e,t){var n=e.dispatch,i=e.getters;n("addRiskEvidence",{getter:i.riskFactors,riskFactors:t})},selectRiskCountries:function(e,t){var n=e.dispatch,i=e.getters;n("addRiskEvidence",{getter:i.riskCountries,riskFactors:t})},addRiskEvidence:function(e,t){var n=e.rootState,i=e.commit,s=t.getter,a=t.riskFactors;s.forEach((function(e){var t=l(n.patient.evidence,e.id);-1!==t&&i("REMOVE_EVIDENCE",t)})),a.length>0&&s.forEach((function(e){a.includes(e.id)?i("ADD_EVIDENCE",{id:e.id,choice_id:"present"}):i("ADD_EVIDENCE",{id:e.id,choice_id:"absent"})}))},setSuggestionEvidence:function(e,t){var n=e.rootState,i=e.commit;n.api.suggestions.forEach((function(e){var s=l(n.patient.evidence,e.id);!t.includes(e.id)&&s>-1?i("REMOVE_EVIDENCE",s):t.includes(e.id)&&-1===s&&i("ADD_EVIDENCE",{id:e.id,choice_id:"present",related:!0})}))},answerSingle:function(e,t){var n=e.state,i=e.commit,s=e.dispatch;i("ADD_EVIDENCE",{id:n.question.items[0].id,choice_id:t.id,counter:n.questionCounter}),i("INCREMENT_QUESTION_COUNTER"),s("diagnosis")},answerGroup:function(e,t){var n=e.state,i=e.commit,s=e.dispatch;Array.isArray(t)?n.question.items.forEach((function(e){t.includes(e.id)?i("ADD_EVIDENCE",{id:e.id,choice_id:"present",counter:n.questionCounter}):i("ADD_EVIDENCE",{id:e.id,choice_id:"absent",counter:n.questionCounter})})):i("ADD_EVIDENCE",{id:t.id,choice_id:"present",counter:n.questionCounter}),i("INCREMENT_QUESTION_COUNTER"),s("diagnosis")},previousQuestion:function(e){var t=e.state,n=e.rootState,i=e.commit,s=e.dispatch;i("DECREMENT_QUESTION_COUNTER");var a=n.patient.evidence.reduce((function(e,n){return n.counter===t.questionCounter?e.previousEvidences.push({id:n.id,choice_id:n.choice_id}):e.otherEvidences.push(Object(c["a"])({},n)),e}),{previousEvidences:[],otherEvidences:[]}),r=a.previousEvidences,o=a.otherEvidences;i("SET_EVIDENCES",o),s("diagnosis",r)},removeCounterEvidences:function(e){var t=e.rootState,n=e.commit,i=t.patient.evidence.filter((function(e){return!e.counter}));n("SET_EVIDENCES",i),n("RESET_QUESTION_COUNTER"),n("SET_CONDITIONS",[]),n("SET_TRIAGE",{}),n("SET_SHOULD_STOP",!1)},logError:function(e,t){var n=e.commit;n("SET_ERROR",t),n("SET_IS_ERROR",!0),n("SET_LOADING",!1),setTimeout((function(){n("SET_IS_ERROR",!1)}),4e3)}},mutations:{SET_LOADING:function(e,t){e.isLoading=t},SET_IS_ERROR:function(e,t){e.isError=t},SET_ERROR:function(e,t){e.errors=t},PUSH_RISK_FACTOR:function(e,t){e.riskFactors.push(t)},SET_SUGGESTIONS:function(e,t){e.suggestions=t},SET_QUESTION:function(e,t){e.question=t},SET_SHOULD_STOP:function(e,t){e.shouldStop=t},SET_CONDITIONS:function(e,t){e.conditions=t},SET_CONDITION_EXPLAIN:function(e,t){var n=t.index,s=t.data;i["a"].set(e.conditions[n],"conflicting_evidence",s.conflicting_evidence),i["a"].set(e.conditions[n],"supporting_evidence",s.supporting_evidence),i["a"].set(e.conditions[n],"unconfirmed_evidence",s.unconfirmed_evidence)},RESET_CONDITION_EXPLAIN:function(e,t){i["a"].delete(e.conditions[t],"conflicting_evidence"),i["a"].delete(e.conditions[t],"supporting_evidence"),i["a"].delete(e.conditions[t],"unconfirmed_evidence")},SET_TRIAGE:function(e,t){e.triage=t},INCREMENT_QUESTION_COUNTER:function(e){e.questionCounter++},DECREMENT_QUESTION_COUNTER:function(e){e.questionCounter--},RESET_QUESTION_COUNTER:function(e){e.questionCounter=0}}},v=(n("6b54"),n("96cf"),n("3b8d")),h=n("bc3a"),m=n.n(h),g={url:"https://api.infermedica.com/v2",headers:function(){return{"content-type":"application/json","App-Id":a.a.get("appId"),"App-Key":a.a.get("appKey")}},parse:function(e){return m()({method:"post",url:"".concat(this.url,"/parse"),headers:this.headers(),data:e})},loadRiskFactors:function(){return m()({method:"get",url:"".concat(this.url,"/risk_factors"),headers:this.headers()})},suggest:function(e){return m()({method:"post",url:"".concat(this.url,"/suggest"),headers:this.headers(),data:e})},diagnosis:function(e){return m()({method:"post",url:"".concat(this.url,"/diagnosis"),headers:this.headers(),data:e})},explain:function(e){return m()({method:"post",url:"".concat(this.url,"/explain"),headers:this.headers(),data:e})},triage:function(e){return m()({method:"post",url:"".concat(this.url,"/triage"),headers:this.headers(),data:e})}},E={parse:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t,n){var i,s,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.rootState,s=t.commit,a=t.dispatch,e.prev=1,s("SET_LOADING",!0),e.next=5,g.parse({text:n});case 5:r=e.sent,r.data.mentions.forEach((function(e){var t={id:e.id,choice_id:e.choice_id,common_name:e.common_name,initial:!0};d(i.patient.evidence,{id:e.id})||s("ADD_EVIDENCE",t)})),s("SET_LOADING",!1),s("SET_IS_ERROR",!1),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),a("logError",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));function t(t,n){return e.apply(this,arguments)}return t}(),loadRiskFactors:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t){var n,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,i=t.dispatch,e.prev=1,n("SET_LOADING",!0),e.next=5,g.loadRiskFactors();case 5:s=e.sent,i("addRiskFactors",{riskFactors:u.defaultRiskFactors,data:s.data}),i("addRiskFactors",{riskFactors:u.defaultRiskCountries,data:s.data}),n("SET_LOADING",!1),n("SET_IS_ERROR",!1),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](1),i("logError",e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));function t(t){return e.apply(this,arguments)}return t}(),suggest:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t){var n,i,s,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.rootState,i=t.getters,s=t.commit,a=t.dispatch,e.prev=1,s("SET_LOADING",!0),e.next=5,g.suggest({sex:n.patient.sex,age:n.patient.age,selected:i.evidenceIds});case 5:r=e.sent,s("SET_SUGGESTIONS",r.data),s("SET_LOADING",!1),s("SET_IS_ERROR",!1),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),a("logError",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));function t(t){return e.apply(this,arguments)}return t}(),diagnosis:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t,n){var i,s,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.getters,s=t.commit,a=t.dispatch,e.prev=1,s("SET_LOADING",!0),e.next=5,g.diagnosis(i.diagnosisData);case 5:r=e.sent,s("SET_SHOULD_STOP",r.data.should_stop),!0===r.data.should_stop&&(s("SET_CONDITIONS",r.data.conditions),a("triage")),n&&n.length>0&&(r.data.question.selected=[],n.forEach((function(e){var t=r.data.question.type;if("group_single"===t)r.data.question.selected=e.id.toString();else if("group_multiple"===t&&"present"===e.choice_id){var n=l(r.data.question.items,e.id);r.data.question.items[n].selected=!0,r.data.question.selected.push(e.id)}else{var i=l(r.data.question.items[0].choices,e.choice_id);r.data.question.items[0].choices[i].selected=!0}}))),s("SET_QUESTION",r.data.question),s("SET_LOADING",!1),s("SET_IS_ERROR",!1),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](1),a("logError",e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));function t(t,n){return e.apply(this,arguments)}return t}(),explain:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t,n){var i,s,a,r,o,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.rootState,s=t.getters,a=t.commit,r=t.dispatch,e.prev=1,o=l(i.api.conditions,n),u=i.api.conditions[o],!(u.supporting_evidence||u.conflicting_evidence||u.unconfirmed_evidence)){e.next=8;break}a("RESET_CONDITION_EXPLAIN",o),e.next=14;break;case 8:return a("SET_LOADING",!0),e.next=11,g.explain(Object(c["a"])({},s.diagnosisData,{target:n}));case 11:d=e.sent,a("SET_CONDITION_EXPLAIN",{data:d.data,index:o}),a("SET_LOADING",!1);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](1),r("logError",e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));function t(t,n){return e.apply(this,arguments)}return t}(),triage:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t){var n,i,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.getters,i=t.commit,s=t.dispatch,e.prev=1,i("SET_LOADING",!0),e.next=5,g.triage(n.diagnosisData);case 5:a=e.sent,i("SET_TRIAGE",a.data),i("SET_LOADING",!1),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),s("logError",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));function t(t){return e.apply(this,arguments)}return t}()},b=(n("a481"),{state:{steps:["StepWelcome","StepSexAge","StepParse","StepRiskFactorsCommon","StepSuggest","StepRiskFactorsMap","StepDiagnosis"],activeStep:"StepWelcome",transition:"flow-in"},getters:{activeStepIndex:function(e){return e.steps.indexOf(e.activeStep)},nextStepIndex:function(e,t){var n=t.activeStepIndex;return n+=1,n>e.steps.length?e.steps.length-1:n},previousStepIndex:function(e,t){var n=t.activeStepIndex;return n-=1,n<0?0:n},shortStepName:function(e){return e.activeStep.replace(/([a-zA-Z])(?=[A-Z])/g,"$1 ")}},mutations:{NEXT_STEP:function(e,t){e.activeStep=e.steps[t]},TRANSITION_NAME:function(e,t){e.transition=t}},actions:{nextStep:function(e){var t=e.getters,n=e.commit;n("TRANSITION_NAME","flow-in"),n("NEXT_STEP",t.nextStepIndex)},previousStep:function(e){var t=e.getters,n=e.commit;n("TRANSITION_NAME","flow-out"),n("NEXT_STEP",t.previousStepIndex)}}}),S={state:{sex:"male",age:30,evidence:[]},mutations:{SET_SEX:function(e,t){e.sex=t},SET_AGE:function(e,t){e.age=t},ADD_EVIDENCE:function(e,t){e.evidence.push(t)},REMOVE_EVIDENCE:function(e,t){e.evidence.splice(t,1)},SET_EVIDENCES:function(e,t){e.evidence=t}}};i["a"].use(o["a"]);var C=new o["a"].Store({actions:E,modules:{api:f,steps:b,patient:S}}),k=(n("2fb4"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app",attrs:{id:"app"}},[n("AppHeader"),e.isError?n("Error"):e._e(),n("transition",{attrs:{name:e.transitionName,mode:"out-in"}},[n("keep-alive",{attrs:{exclude:"StepDiagnosis"}},[n(e.step,{key:e.step,tag:"component"})],1)],1),n("AppFooter")],1)}),x=[],O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app__header"})},y=[],I={name:"AppHeader"},R=I,T=(n("7b0e"),n("2877")),N=Object(T["a"])(R,O,y,!1,null,null,null),w=N.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app__footer"},[n("transition",{attrs:{name:"flow-up",appear:""}},["Step Welcome"!==e.stepName?n("div",{staticClass:"step__bar"},[n("div",{staticClass:"step__name"},[e._v("\n        "+e._s(e.stepName)+"\n      ")])]):e._e()])],1)},A=[],D={name:"AppFooter",computed:Object(c["a"])({},Object(o["c"])({stepName:"shortStepName"}))},j=D,$=(n("7d7f"),Object(T["a"])(j,q,A,!1,null,null,null)),F=$.exports,L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Step",[n("div",{staticClass:"step-welcome"},[n("div",{staticClass:"step-welcome__header"},[n("div",{staticClass:"step-welcome__title"},[e._v("Automated Medical Assistant")])]),n("ApiCredentials")],1)])},P=[],G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"api__credentials"},[n("BaseInput",{attrs:{"is-error":e.validations.appId.error,label:"App Id",disabled:!e.isCredentialEditable,width:400,error:"App Id is required to proceed"},model:{value:e.appId,callback:function(t){e.appId=t},expression:"appId"}}),n("BaseInput",{attrs:{label:"App Key","is-error":e.validations.appKey.error,disabled:!e.isCredentialEditable,width:400,error:"App Key is required to proceed"},model:{value:e.appKey,callback:function(t){e.appKey=t},expression:"appKey"}}),e.isCredentialEditable?n("button",{staticClass:"api__save",on:{click:function(t){return e.saveCredentials()}}},[e._v("Save Credentials")]):n("button",{staticClass:"api__edit",on:{click:function(t){e.isCredentialEditable=!e.isCredentialEditable}}},[e._v("\n    Edit Credentials\n  ")])],1)},B=[],M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input__container",style:e.calculatedWidth},[n("input",{staticClass:"input__base",attrs:{required:"",disabled:e.disabled,type:e.type,novaldiate:"",placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}),e.label?n("label",{class:e.disabled?"input__label--disabled":"input__label"},[e._v(e._s(e.label))]):e._e(),n("span",{staticClass:"input__bar"}),n("transition",[e.isError?n("div",{staticClass:"input--error"},[e._v(e._s(e.error))]):e._e()])],1)},U=[],V=(n("c5f6"),{name:"BaseInput",props:{value:{type:[Number,String],default:""},width:{type:Number,default:170},label:{type:String,default:""},disabled:{type:Boolean,default:!1},type:{type:String,default:"text"},placeholder:{type:String,default:"Provide value"},error:{type:String,default:""},isError:{type:Boolean,default:!1}},computed:{calculatedWidth:function(){return"width: ".concat(this.width,"px;")}}}),Q=V,K=(n("ce69"),Object(T["a"])(Q,M,U,!1,null,null,null)),W=K.exports,H={name:"ApiCredentials",data:function(){return{validations:{valid:!0,appId:{error:!1},appKey:{error:!1}},appId:this.$cookies.get("appId"),appKey:this.$cookies.get("appKey"),isCredentialEditable:!1}},computed:Object(c["a"])({},Object(o["d"])({riskFactors:function(e){return e.api.riskFactors}})),methods:{saveCredentials:function(){this.validateCredentials(),this.validations.valid&&(this.$cookies.set("appId",this.appId),this.$cookies.set("appKey",this.appKey),this.isCredentialEditable=!1,this.$store.dispatch("loadRiskFactors"))},validateCredentials:function(){this.appId&&this.appKey?(this.validations.valid=!0,this.validations.appId.error=!1,this.validations.appKey.error=!1):(this.validations.valid=!1,this.appId?this.validations.appId.error=!1:this.validations.appId.error=!0,this.appKey?this.validations.appKey.error=!1:this.validations.appKey.error=!0)}},components:{BaseInput:W}},X=H,z=(n("5d10"),Object(T["a"])(X,G,B,!1,null,null,null)),J=z.exports,Z={name:"StepWelcome",computed:Object(c["a"])({},Object(o["c"])({stepName:"shortStepName",stepIndex:"getActiveStepIndex"})),components:{ApiCredentials:J}},Y=Z,ee=(n("938f"),Object(T["a"])(Y,L,P,!1,null,null,null)),te=ee.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Step",[n("div",{staticClass:"step__subtitle"},[e._v("Gather initial information about patient")]),n("div",{staticClass:"step-sexage"},[n("div",{staticClass:"step-sexage__form"},[n("label",{staticClass:"step-sexage--field"},[e._v("Sex")]),n("BaseRadio",{attrs:{label:"Male","check-value":"male"},model:{value:e.sex,callback:function(t){e.sex=t},expression:"sex"}}),n("BaseRadio",{attrs:{label:"Female","check-value":"female"},model:{value:e.sex,callback:function(t){e.sex=t},expression:"sex"}})],1),n("div",{staticClass:"step-sexage__form"},[n("label",{staticClass:"step-sexage--field"},[e._v("Age")]),n("BaseInput",{staticClass:"step-sexage__value",model:{value:e.age,callback:function(t){e.age=e._n(t)},expression:"age"}})],1)])])},ie=[],se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"radio__label"},[e._v("\n  "+e._s(e.label)+"\n  "),n("input",{staticClass:"radio__input",attrs:{type:"radio"},domProps:{checked:e.checkValue===e.value||!0===e.selected,value:e.label},on:{input:function(t){return e.$emit("input",e.checkValue)}}}),n("div",{staticClass:"radio__check"})])},ae=[],re={name:"BaseRadio",props:{value:{type:String,default:""},label:{type:String,default:""},checkValue:{type:String,default:""},selected:{type:Boolean,default:!1}}},oe=re,ce=(n("e7da"),Object(T["a"])(oe,se,ae,!1,null,null,null)),ue=ce.exports,le={name:"StepSexAge",computed:{sex:{get:function(){return this.$store.state.patient.sex},set:function(e){this.$store.commit("SET_SEX",e)}},age:{get:function(){return this.$store.state.patient.age},set:function(e){this.$store.commit("SET_AGE",e)}}},components:{BaseRadio:ue,BaseInput:W}},de=le,pe=(n("1ccc"),Object(T["a"])(de,ne,ie,!1,null,null,null)),_e=pe.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Step",[n("div",{staticClass:"step__subtitle"},[e._v("Gather initial symptoms from patient")]),n("div",{staticClass:"step-parse"},[n("h5",{staticClass:"step-parse__title"},[e._v("What concerns you most about your health?")]),n("div",[n("p",[e._v("We will try to recognize your symptoms using Natural Language Processing algorithms.")])]),n("textarea",{staticClass:"step-parse__area",attrs:{placeholder:"e.g. I've got headache"},on:{input:function(t){return e.suggest(t.target.value)}}}),e.parsedSymptoms.length>0?n("div",{staticClass:"step-parse__identified"},[e._v("Identified symptoms:")]):e._e(),e.parsedSymptoms.length>0?n("ul",{staticClass:"step-parse__list"},e._l(e.parsedSymptoms,(function(t){return n("li",{key:t.id,staticClass:"step-parse__item"},[n("Icon",{staticClass:"step-parse__icon",attrs:{name:"plus-square"}}),e._v("\n         "+e._s(t.common_name)+"\n        "),n("button",{staticClass:"step-parse__remove",attrs:{type:"button","aria-label":"Close"},on:{click:function(n){return e.removeParsedSymptom(t.id)}}},[n("Icon",{attrs:{name:"times",scale:"0.85"}})],1)],1)})),0):e._e(),e.isLoading?n("Icon",{staticClass:"step-parse__load",attrs:{name:"spinner",spin:""}}):e._e(),n("div",{staticClass:"step-parse__text"},[e._v("\n      This screen uses our NLP engine to find symptoms in a written text.\n      Evidence found in text will be marked as initial which is important to\n      our engine. Please read more about initial evidence\n      "),n("a",{attrs:{href:"https://developer.infermedica.com/docs/diagnosis#gathering-initial-evidence",target:"_blank"}},[e._v("here")]),e._v(".\n    ")])],1)])},ve=[],he=n("b047"),me=n.n(he),ge={name:"StepParse",computed:Object(c["a"])({},Object(o["d"])({isLoading:function(e){return e.api.isLoading}}),Object(o["c"])({parsedSymptoms:"parsedSymptoms"})),methods:Object(c["a"])({},Object(o["b"])(["removeParsedSymptom"]),{suggest:me()((function(e){e.length>0&&this.$store.dispatch("parse",e)}),500)})},Ee=ge,be=(n("274e"),Object(T["a"])(Ee,fe,ve,!1,null,null,null)),Se=be.exports,Ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Step",[n("div",{staticClass:"step__subtitle"},[e._v("Determine possible risk factors")]),n("h5",{staticClass:"step__caption"},[e._v("Please check all that apply to you.")]),n("div",{staticClass:"step__center"},[e.riskFactors&&e.riskFactors.length>0?n("div",e._l(e.riskFactors,(function(t){return n("BaseCheckbox",{key:t.id,attrs:{"value-check":t.id,label:t.common_name},model:{value:e.selectedRiskFactors,callback:function(t){e.selectedRiskFactors=t},expression:"selectedRiskFactors"}})})),1):e._e()])])},ke=[],xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"checkbox__label"},[e._v("\n  "+e._s(e.label)+"\n  "),n("input",{staticClass:"checkbox__input",attrs:{type:"checkbox"},domProps:{checked:e.value.includes(e.valueCheck)&&!0===e.selected,value:e.valueCheck},on:{input:function(t){return e.updateInput(t.target)}}}),n("span",{staticClass:"checkbox__mark"})])},Oe=[],ye={name:"BaseCheckbox",props:{value:{type:Array,default:Array},label:{type:String,default:""},valueCheck:{type:String,default:""},selected:{type:Boolean,default:!1}},methods:{updateInput:function(e){this.value.includes(e.value)&&!e.checked?this.value.splice(this.value.indexOf(e.value),1):this.value.push(e.value),this.$emit("input",this.value)}}},Ie=ye,Re=(n("2a66"),Object(T["a"])(Ie,xe,Oe,!1,null,null,null)),Te=Re.exports,Ne={name:"StepRiskFactorsCommon",computed:Object(c["a"])({},Object(o["c"])({riskFactors:"riskFactors"}),{selectedRiskFactors:{get:function(){return this.$store.getters.selectedRiskFactorsCommon},set:function(e){this.$store.dispatch("selectRiskFactors",e)}}}),components:{BaseCheckbox:Te}},we=Ne,qe=Object(T["a"])(we,Ce,ke,!1,null,null,null),Ae=qe.exports,De=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Step",[n("div",{staticClass:"step__subtitle"},[e._v("Collect geographical risk factors")]),n("h5",{staticClass:"step__caption"},[e._v("Please check all that apply to you")]),e.riskCountries&&e.riskCountries.length>0?n("div",{staticClass:"step__center"},e._l(e.riskCountries,(function(t){return n("BaseCheckbox",{key:t.id,attrs:{"value-check":t.id,label:t.common_name},model:{value:e.selectedRiskCountries,callback:function(t){e.selectedRiskCountries=t},expression:"selectedRiskCountries"}})})),1):e._e()])},je=[],$e={name:"StepRiskFactorsMap",computed:Object(c["a"])({},Object(o["c"])({riskCountries:"riskCountries"}),{selectedRiskCountries:{get:function(){return this.$store.getters.selectedRiskFactorsMap},set:function(e){this.$store.dispatch("selectRiskCountries",e)}}}),components:{BaseCheckbox:Te}},Fe=$e,Le=Object(T["a"])(Fe,De,je,!1,null,null,null),Pe=Le.exports,Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Step",[n("div",{staticClass:"step__subtitle"},[e._v("Collect all related symptoms")]),n("h5",{staticClass:"step__caption"},[e._v("Check if any of below symptoms apply to you?")]),n("div",{staticClass:"step__center"},[e._l(e.suggestions,(function(t){return n("BaseCheckbox",{key:t.id,attrs:{"value-check":t.id,label:t.common_name},model:{value:e.selectedSuggestions,callback:function(t){e.selectedSuggestions=t},expression:"selectedSuggestions"}})})),e.isLoading?n("Icon",{attrs:{name:"spinner",spin:""}}):e._e()],2)])},Be=[],Me={name:"StepSuggest",computed:Object(c["a"])({},Object(o["d"])({isLoading:function(e){return e.api.isLoading},suggestions:function(e){return e.api.suggestions}}),{selectedSuggestions:{get:function(){return this.$store.getters.selectedSuggestions},set:function(e){this.$store.dispatch("setSuggestionEvidence",e)}}}),beforeCreate:function(){this.$store.dispatch("suggest")},components:{BaseCheckbox:Te}},Ue=Me,Ve=Object(T["a"])(Ue,Ge,Be,!1,null,null,null),Qe=Ve.exports,Ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Step",{attrs:{"disable-next":e.disabled},on:{answerGroup:e.answerGroup}},[n("div",{staticClass:"step__subtitle"},[e._v("Diagnose patient based on answers")]),n("div",{staticClass:"step__widen"},[!0!==e.shouldStop&&!1===e.isLoading?n("div",{staticClass:"step-diagnosis"},["single"===e.question.type?n("QuestionSingle",{attrs:{question:e.question},on:{answer:e.answerSingle}}):"group_single"===e.question.type?n("QuestionGroupSingle",{attrs:{question:e.question,selected:e.question.selected},on:{answer:e.answerGroup}}):"group_multiple"===e.question.type?n("QuestionGroupMultiple",{attrs:{question:e.question,selected:e.question.selected},on:{answer:e.answerGroup}}):e._e()],1):!0===e.shouldStop?n("div",{staticClass:"step__final"},[e.triage&&e.triage.triage_level?n("Triage",{attrs:{triage:e.triage}}):e._e(),e.conditions.length>0?n("ConditionList",{attrs:{conditions:e.conditions}}):e._e()],1):e._e(),e.isLoading?n("Icon",{staticClass:"icon__loading",attrs:{name:"spinner",spin:""}}):e._e()],1)])},We=[],He=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h5",{staticClass:"question__title"},[e._v(e._s(e.question.text))]),n("div",{staticClass:"question-single__form"},e._l(e.question.items[0].choices,(function(t){return n("button",{key:t.id,staticClass:"btn mr-4",class:{"question-single--yes":"present"===t.id,"question-single--no":"absent"===t.id,"question-single--unknown":"unknown"===t.id,"question-single--selected":t.selected},on:{click:function(n){return e.addEvidence(t)}}},[e._v("\n      "+e._s(t.label)+"\n    ")])})),0)])},Xe=[],ze={name:"QuestionSingle",props:{question:{type:Object,default:Object}},methods:{addEvidence:function(e){this.$emit("answer",e)}}},Je=ze,Ze=(n("462f"),Object(T["a"])(Je,He,Xe,!1,null,null,null)),Ye=Ze.exports,et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"question__group"},[n("h5",{staticClass:"question__title"},[e._v(e._s(e.question.text))]),n("div",e._l(e.question.items,(function(t){return n("BaseRadio",{key:t.id,attrs:{"check-value":t.id,selected:t.selected,label:t.name},model:{value:e.answer,callback:function(t){e.answer=t},expression:"answer"}})})),1)])},tt=[],nt=(n("7514"),{props:{question:{type:Object,default:Object},selected:{type:String,default:""}},data:function(){return{answer:this.selected}},watch:{answer:function(){var e=this,t=this.question.items.find((function(t){return t.id===e.answer}));this.$emit("answer",t)}},components:{BaseRadio:ue}}),it=nt,st=Object(T["a"])(it,et,tt,!1,null,null,null),at=st.exports,rt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"question__group"},[n("h5",{staticClass:"question__title"},[e._v(e._s(e.question.text))]),n("div",e._l(e.question.items,(function(t){return n("BaseCheckbox",{key:t.id,attrs:{"value-check":t.id,selected:t.selected,label:t.name},model:{value:e.answers,callback:function(t){e.answers=t},expression:"answers"}})})),1)])},ot=[],ct={name:"QuestionGroupMultiple",props:{question:{type:Object,default:Object},selected:{type:Array,default:Array}},data:function(){return{answers:this.selected}},watch:{answers:function(){this.$emit("answer",this.answers)}},components:{BaseCheckbox:Te}},ut=ct,lt=Object(T["a"])(ut,rt,ot,!1,null,null,null),dt=lt.exports,pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"condition-list"},e._l(e.conditions,(function(t){return n("div",{key:t.id},[n("div",{staticClass:"condition-list__item"},[n("h5",{staticClass:"condition-list__header"},[e._v(" "+e._s(t.common_name)+"  ")]),t.probability>.2?n("div",{staticClass:"condition-list--explain",on:{click:function(n){return e.explain(t.id)}}},[e._v("\n        explain\n        "),n("Icon",{staticClass:"icon__explain",attrs:{name:"eye"}})],1):e._e()]),n("div",{staticClass:"condition-list__progress progress"},[n("div",{staticClass:"progress__bar",style:e.getCalculatedWidth(t.probability,"width"),attrs:{"aria-valuenow":100*t.probability,"aria-valuemin":"0","aria-valuemax":"100"}},[e._v("\n        "+e._s(e.getCalculatedWidth(t.probability))+"\n      ")])]),n("div",{staticClass:"condition-list__explain explain"},[t.supporting_evidence&&t.supporting_evidence.length>0?n("div",{staticClass:"explain__evidences"},[n("div",{staticClass:"explain__header"},[n("Icon",{staticClass:"icon__plus",attrs:{name:"plus-square"}}),e._v("Supporting Evidence\n        ")],1),e._l(t.supporting_evidence,(function(t){return n("div",{key:t.id,staticClass:"explain__condition"},[e._v("\n          "+e._s(t.common_name)+"\n        ")])}))],2):e._e(),t.conflicting_evidence&&t.conflicting_evidence.length>0?n("div",{staticClass:"explain__evidences"},[n("div",{staticClass:"explain__header"},[n("Icon",{staticClass:"icon__minus",attrs:{name:"minus-square"}}),e._v("Conflicting Evidence\n        ")],1),e._l(t.conflicting_evidence,(function(t){return n("div",{key:t.id,staticClass:"explain__condition"},[e._v("\n          "+e._s(t.common_name)+"\n        ")])}))],2):e._e(),t.unconfirmed_evidence&&t.unconfirmed_evidence.length>0?n("div",{staticClass:"explain__evidences"},[n("div",{staticClass:"explain__header"},[n("Icon",{staticClass:"icon__question",attrs:{name:"question"}}),e._v("Unconfirmed Evidence\n        ")],1),e._l(t.unconfirmed_evidence,(function(t){return n("div",{key:t.id,staticClass:"explain__condition"},[e._v("\n          "+e._s(t.common_name)+"\n        ")])}))],2):e._e()])])})),0)},_t=[],ft={name:"ConditionList",props:{conditions:{type:Array,default:Array}},methods:{getCalculatedWidth:function(e,t){var n=100*e;return void 0===t?(n=Math.round(100*n)/100,"".concat(n,"%")):"".concat(t,":").concat(n,"%;")},explain:function(e){this.$store.dispatch("explain",e)}}},vt=ft,ht=(n("96cfc"),Object(T["a"])(vt,pt,_t,!1,null,null,null)),mt=ht.exports,gt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"triage"},[e.triage.serious.length?n("h3",{staticClass:"triage__header"},[e._v("Serious observations: "+e._s(e.triage.serious.length))]):e._e(),e._l(e.triage.serious,(function(t){return n("div",{key:t.id,staticClass:"triage__item"},[n("h5",{class:t.isEmergency?"triage__item--danger":"triage__item--warning"},[e._v(e._s(t.common_name))])])})),n("h4",{staticClass:"triage__header--recommended"},[e._v("Recommended: "+e._s(e.getTriageLevel(e.triage.triage_level)))])],2)},Et=[],bt={name:"Triage",props:{triage:{type:Object,default:Object}},methods:{getTriageLevel:function(e){return e.replace("_"," ")}}},St=bt,Ct=(n("cc34"),Object(T["a"])(St,gt,Et,!1,null,null,null)),kt=Ct.exports,xt={name:"StepDiagnosis",data:function(){return{answer:""}},computed:Object(c["a"])({},Object(o["d"])({isLoading:function(e){return e.api.isLoading},shouldStop:function(e){return e.api.shouldStop},question:function(e){return e.api.question},conditions:function(e){return e.api.conditions},triage:function(e){return e.api.triage}}),{disabled:function(){return this.question.selected?!(this.question.selected.length>0):0===this.answer.length}}),methods:{answerSingle:function(e){this.$store.dispatch("answerSingle",e)},answerGroup:function(e){if(e)this.answer=e;else{if(this.question.selected)"group_single"===this.question.type?this.answer={id:this.question.selected}:this.answer=this.question.selected;else if(""===this.answer)return;this.$store.dispatch("answerGroup",this.answer),this.answer=""}}},beforeCreate:function(){this.$store.dispatch("diagnosis")},components:{QuestionSingle:Ye,QuestionGroupSingle:at,QuestionGroupMultiple:dt,ConditionList:mt,Triage:kt}},Ot=xt,yt=(n("147f"),Object(T["a"])(Ot,Ke,We,!1,null,null,null)),It=yt.exports,Rt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"slide",appear:""}},[e.isError?n("div",{staticClass:"error"},[n("div",{staticClass:"error__item"},[n("Icon",{attrs:{name:"bug"}}),e._v("  Problem:\n      "+e._s(e.errors.response.data.message)+"\n    ")],1)]):e._e()])},Tt=[],Nt={name:"Error",computed:Object(c["a"])({},Object(o["d"])({isError:function(e){return e.api.isError},errors:function(e){return e.api.errors}}))},wt=Nt,qt=(n("daa4"),Object(T["a"])(wt,Rt,Tt,!1,null,null,null)),At=qt.exports,Dt={name:"App",computed:Object(c["a"])({},Object(o["d"])({step:function(e){return e.steps.activeStep},transitionName:function(e){return e.steps.transition},riskFactors:function(e){return e.api.riskFactors},isError:function(e){return e.api.isError}})),created:function(){this.$store.dispatch("loadRiskFactors")},components:{AppHeader:w,AppFooter:F,StepWelcome:te,StepSexAge:_e,StepParse:Se,StepRiskFactorsCommon:Ae,StepRiskFactorsMap:Pe,StepSuggest:Qe,StepDiagnosis:It,Error:At}},jt=Dt,$t=(n("5c0b"),Object(T["a"])(jt,k,x,!1,null,null,null)),Ft=$t.exports,Lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"step__container"},[n("div",{staticClass:"step__content"},[e._t("default",[e._v("YOUR CONTENT WILL GO HERE AND THIS TEXT WILL DISAPPEAR!")])],2),n("div",{staticClass:"step__footer"},[n("transition",{attrs:{name:"fade"}},[0!==e.index?n("button",{staticClass:"step__back",on:{click:function(t){return e.previousAction()}}},[e._v("\n        Back\n      ")]):e._e()]),e.displayNextQuestion?n("button",{staticClass:"main__button",attrs:{disabled:e.disableNext},on:{click:e.diagnose}},[e._v("\n      Next question >\n    ")]):"StepDiagnosis"!==e.step?n("button",{staticClass:"main__button",attrs:{disabled:"StepParse"===e.step&&0===e.parsedSymptoms.length,title:e.btnPopoverText},on:{click:function(t){return e.$store.dispatch("nextStep")}}},[e._v("\n      "+e._s(e.nextStepText)+" >\n    ")]):e._e()],1)])},Pt=[],Gt={name:"Step",props:{disableNext:{type:Boolean,default:!0}},computed:Object(c["a"])({},Object(o["c"])({index:"activeStepIndex",parsedSymptoms:"parsedSymptoms"}),Object(o["d"])({step:function(e){return e.steps.activeStep},shouldStop:function(e){return e.api.shouldStop},question:function(e){return e.api.question},questionCounter:function(e){return e.api.questionCounter}}),{displayNextQuestion:function(){return"StepDiagnosis"===this.step&&this.question&&!0!==this.shouldStop},btnPopoverText:function(){return 0===this.parsedSymptoms.length&&"StepParse"===this.step?"Enter at least one symptom":"Click for next step"},nextStepText:function(){return"StepWelcome"===this.step?"Start Interview":"Next"}}),methods:{previousAction:function(){"StepDiagnosis"!==this.step||0===this.questionCounter||this.shouldStop?(this.$store.dispatch("removeCounterEvidences"),this.$store.dispatch("previousStep")):this.$store.dispatch("previousQuestion")},nextStep:function(){this.$store.dispatch("nextStep")},diagnose:function(){"group_single"===this.question.type||"group_multiple"===this.question.type?this.$emit("answerGroup"):this.$store.dispatch("diagnosis")}}},Bt=Gt,Mt=(n("a080"),Object(T["a"])(Bt,Lt,Pt,!1,null,null,null)),Ut=Mt.exports;i["a"].use(a.a),a.a.config("7d"),i["a"].config.productionTip=!1,i["a"].component("Icon",r["a"]),i["a"].component("Step",Ut),new i["a"]({store:C,render:function(e){return e(Ft)}}).$mount("#app")},c25a:function(e,t,n){},cc34:function(e,t,n){"use strict";var i=n("6af6"),s=n.n(i);s.a},cdbe:function(e,t,n){},ce69:function(e,t,n){"use strict";var i=n("941d"),s=n.n(i);s.a},daa4:function(e,t,n){"use strict";var i=n("cdbe"),s=n.n(i);s.a},e7da:function(e,t,n){"use strict";var i=n("1d65"),s=n.n(i);s.a},f4d5:function(e,t,n){}});
//# sourceMappingURL=index.7d7b1825.js.map